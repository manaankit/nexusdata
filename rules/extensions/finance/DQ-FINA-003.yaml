$schema: ../../../schemas/rule-schema.json
rule_id: DQ-FINA-003
legacy_rule_id: DQ-FIN-003
name: IBANValidation
dimension: Validity
description: IBAN values must match country format and pass modulo 97 checksum validation.
parameters:
  extends: DQ-VAL-002
  column: iban
  regex: '^[A-Z]{2}[0-9]{2}[A-Z0-9]{11,30}$'
  checksum_method: mod97
applicability:
  semantic_types:
    - IBAN
  data_types:
    - string
  column_patterns:
    - '.*iban.*'
severity: Warn
threshold: 99.5
implementations:
  sql: validate_iban({column}) = false
  pandas: df['{column}'].apply(is_valid_iban) == False
  great_expectations: custom expectation expect_column_values_to_be_valid_iban
example_usage: Flag and quarantine failed IBAN records before payment processing.
